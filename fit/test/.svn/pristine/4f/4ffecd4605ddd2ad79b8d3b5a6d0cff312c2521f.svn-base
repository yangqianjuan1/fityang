webpackJsonp([45],{"+lzo":function(module,exports){PAYPAL_CLIENT="Ad7QQ8D0_0-o_eyTVWWgFrGlJO8lnD_jsNiJPl-dJR8Us_Z_nO4_7Rwpmr-YS5fQ2dERhU9QT8zILlSm",PAYPAL_SECRET="EIMYiq1kyYJKyJYbR17IXo01X9YiS2FZIuxK0B4o8zrOUHMIRqY3iudFvFWppKfCvD9os9z5tT_N2EK9",PAYPAL_OAUTH_API="https://api.paypal.com/v1/oauth2/token/",PAYPAL_ORDER_API="https://api.paypal.com/v2/checkout/orders/",basicAuth=Base64.encode(`${PAYPAL_CLIENT}:${PAYPAL_SECRET}`);let Url=PAYPAL_OAUTH_API,xhr=new XMLHttpRequest,dataTonken;function doResult(){4==xhr.readyState&&200==xhr.status&&(dataTonken=eval("("+xhr.responseText+")"),console.log("接受支付令牌token"))}function handleRequest(e,t){let r;console.log("----异常捕获-handlerequest---"),orderID=e.body.orderID;let o=PAYPAL_ORDER_API+orderID,n=new XMLHttpRequest;return(n=open("GET",o,!0)).setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("Authorization",`Bearer ${dataTonken.access_token}`),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(r=n.responseText,conlose.log("异常处理-初始化"),console.log("异常的回调:"+n.responseText))},r.error?t.send(500):"0.06"!==r.purchase_units[0].amount.value?t.send(400):(database.saveTransaction(orderID),t.send(200))}xhr.open("post",Url,!0),xhr.setRequestHeader("Accept","application/json"),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.setRequestHeader("Authorization",`Basic ${basicAuth}`),console.log("---------初始化-baseicauth---------"),xhr.send("grant_type=client_credentials"),xhr.onreadystatechange=doResult},"TW7+":function(e,t){},VaOU:function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t){module.exports=t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(void 0!==module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},r=0,o=e.length;r<o;r++)t[e.charAt(r)]=r;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(r>>>18),b64chars.charAt(r>>>12&63),t>=2?"=":b64chars.charAt(r>>>6&63),t>=1?"=":b64chars.charAt(63&r)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,r=t%4,o=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),n=[fromCharCode(o>>>16),fromCharCode(o>>>8&255),fromCharCode(255&o)];return n.length-=[0,0,2,1][r],n.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),void 0!==module&&module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}})}).call(exports,__webpack_require__("DuR2"))},pf06:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("VaOU"),n=r.n(o),a=r("+lzo"),u=r.n(a),c={data:function(){return{timer:null,payTimer:null}},components:{Base64:n.a,payconfig:u.a},methods:{payResult:function(e){200==e?this.$emit("payResult",[!0]):this.$emit("payResult",[!1])},first:function(){var e=this,t=document.createElement("script");t.type="text/javascript",t.src="https://www.paypal.com/sdk/js?client-id=Ad7QQ8D0_0-o_eyTVWWgFrGlJO8lnD_jsNiJPl-dJR8Us_Z_nO4_7Rwpmr-YS5fQ2dERhU9QT8zILlSm",document.body.appendChild(t);var r=1500;this.timer=setInterval(function(){paypal.Buttons({createOrder:function(e,t){e="0.01";return null!=sessionStorage.payAmountValue&&(e=sessionStorage.payAmountValue),t.order.create({purchase_units:[{amount:{value:e}}]})},onApprove:function(e,t){return t.order.capture().then(function(e){return"COMPLETED"==e.status?""==e.purchase_units[0].amount.value&&null==e.purchase_units[0].amount.value?(r=1501,console.log("异常支付1"),"fail"):(sessionStorage.finalmoney=e.purchase_units[0].amount.value,r=200,console.log("支付成功:"),"success"):(r=1502,console.log("异常支付2"),"fail")})}}).render("#paypal-button-container"),clearInterval(e.timer)},500),this.payTimer=setInterval(function(){if(1500!=r)return clearInterval(e.payTimer),e.payResult(r),sessionStorage.payAmountValu="0.01",void(r=1500)},1e3)}},mounted:function(){this.first()}},s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{attrs:{id:"paypal-button-container"}})])}]};var i=r("VU/8")(c,s,!1,function(e){r("TW7+")},null,null);t.default=i.exports}});