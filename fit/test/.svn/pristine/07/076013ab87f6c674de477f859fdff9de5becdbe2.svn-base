webpackJsonp([18],{MjYH:function(e,t){},fkny:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("sTlg"),n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"autologin"},[t("div",{staticClass:"logininfo"},[t("p",{staticClass:"pinfo"},[this._v("登陆中，请稍后...")])])])}]};var s=function(e){r("MjYH")},i=r("VU/8")(o.a,n,!1,s,null,null);t.default=i.exports},mvHQ:function(e,t,r){e.exports={default:r("qkKv"),__esModule:!0}},qkKv:function(e,t,r){var o=r("FeBl"),n=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},sTlg:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1__components_tips_tips__=__webpack_require__("ZbL4"),__WEBPACK_IMPORTED_MODULE_1__components_tips_tips___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_tips_tips__);__webpack_exports__.a={data:function(){return{errormsg:"本次授权失败"}},comments:{tips:__WEBPACK_IMPORTED_MODULE_1__components_tips_tips___default.a},mounted:function(){sessionStorage.isloginInfo=!0,this.redirectUrl()},methods:{errorRedirect:function(){sessionStorage.isloginInfo=!1,alert(this.errormsg+",即将跳转到注册页面"),window.location.href="http://01.coinunio.com/#/logo/register"},getQueryString:function(e){var t=window.location.href,r=new Object;if(t.indexOf("?")>0){for(var o=t.split("?")[1].split("&"),n=0;n<o.length;n++){var s=o[n].split("="),i=s[1];i.indexOf("#")>0&&(i=i.split("#")[0]),r[s[0]]=i}return r.token}},redirectUrl:function redirectUrl(){if(window.location.href.indexOf("?token")>0==0)return this.errormsg="检测到错误的链接",void this.errorRedirect();var token=this.getQueryString("token");console.log(token);var xhr=null;xhr=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var Url="http://01.coinunio.com/channel-server/user/getxlLogin.do",form=new FormData;form.append("token",token),xhr.open("post",Url,!0),xhr.send(form),xhr.onreadystatechange=function(){if(4==xhr.readyState)if(200==xhr.status){var autologininfo=eval("("+xhr.responseText+")");if("200"==autologininfo.errorCode){var result=autologininfo.result,data={};data.Id=result.id,data.userName=result.username,data.password=null,data.Balance=result.balance,data.FreezeAmount=result.freezeamount,data.IsRobot=result.isrobot,data.InviteCount=result.invitecount,data.InviteRechargeCount=result.inviterechargecount,data.BreedTimes=result.breedtimes,data.FreeFeedTimes=result.freefeedtimes,data.FreeModifyNick=result.freemodifynick,data.HasRecharge=result.hasrecharge,data.FreeLassoCount=result.freelassocount,data.TransactionMemo=result.transactionmemo,data.WanLiPieces=result.wanlipieces,data.RemainHorseFood=result.remainhorsefood;var ajax=null;ajax=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),ajax.open("post","http://01.coinunio.com/api/happymoney/logintohm/",!0),ajax.send(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(data)),ajax.onreadystatechange=function(){if(4==ajax.readyState)if(200==ajax.status){var logindata=eval("("+ajax.responseText+")");logindata.IsSuccess?(console.log(logindata),localStorage.clear(),localStorage.setItem("userid",result.username),localStorage.setItem("uid",result.id),sessionStorage.isopenid=result.openid,window.location.href=logindata.Result.url):(this.errormsg="登录信息缺失",this.errorRedirect())}else this.errormsg="自动登录失败",this.errorRedirect()}}else this.errormsg="授权信息不正确",this.errorRedirect()}else this.errormsg="拉取授权信息失败",this.errorRedirect()}}}}}});